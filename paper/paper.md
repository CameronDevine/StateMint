---
title: 'Statum: An Application for Determining Symbolic Dynamic System Models using Linear Graph Methods'
tags:
  - system dynamics
  - calculator
  - symbolic math
  - computer algebra system
authors:
  - name: Cameron Devine
    orcid: 0000-0002-6579-111X
    affiliation: 1
  - name: Joseph L. Garbini
    affiliation: 1
  - name: Rico A. R. Picone
    orcid: 0000-0002-5091-5175
    affiliation: "2, 1"
affiliations:
  - name: University of Washington, Department of Mechanical Engineering
    index: 1
  - name: Saint Martin's University, Department of Mechanical Engineering
    index: 2
date: 26 September 2018
bibliography: paper.bib
---

# Summary

When determining the differential equation of a dynamic system using linear graph methods finding the elemental and constraint equations is the first step.
The next step is to algebraically eliminate those variables that are not state or input variables from the equations until a minimal set of differential equations remains.
During this step of manually reducing the system of equations is where students often make mistakes, leading to frustration and discouragement.
However, this algebra is not a necessary component of a strong understanding of system dynamics and can be easily automated using tools we present here.


To aid students in their learning process a program was written to symbolically determine the differential equations using the elemental and constraint equations as input.
This program allows students to focus on the process of creating a dynamic system model without worrying about algebraic mistakes.
This frees the student to work on the aspects of system dynamics which are new and unique.

Because symbolic math libraries already exist, writing this software is a relatively trivial task.
This was originally done in Mathematica because of its advanced symbolic math capabilities.
However, this required students to purchase and install Mathematica.
Because of the size and cost of Mathematica a more economical solution was desired.
To solve this problem the Python programming language along with SymPy [@meurer2017], a symbolic math library, was used to recreate the software.
This provides the same functionality without the cost barrier and with a smaller installed size.
The Python implementation also allows this code to be run as an Amazon AWS Lambda function.
With the Lambda function, a website can be designed to allow this software to be used by any device with an internet connection and web browser.

# Mathematica Package

The Mathematica package `StateMint` can be installed via the [documentation](). The central function of the package is `stateEquations`, which uses an algorithm similar to that of the Python package, above, to derive the state equations. It takes as arguments lists of elemental equations, constraint equations, primary variables, and input variables and returns the vector state equation, state variables, and the time-derivative of the state variables.

The `outputEquations` function derives the output equations given output expressions in terms of primary and secondary variables (including inputs). The function accepts lists of input variables, state variables, elemental and constraint equations, and output expressions.

The functions `stateEquations` and `outputEquations` yield what are in general *nonlinear* state and output equations. Linear state and output equations are typically written in a standard vector form described by matrices `A`, `B`, `C`, and `D` (and sometimes `E` and `F`). The `linearizeState` function accepts lists of input variables, state variables, and the time-derivatives of the state vector (from `stateEquations`) and returns the `A`, `B`, and `E` matrices. Similarly, `linearizeOutput` returns the `C`, `D`, and `F` matrices.

A tutorial on how to use this package is included.

# Python Package

The Python package for performing the same task uses similar logic to the second method of the Mathematica package, again in the form defined by Rowell and Wormley [@rowell1997].
This function returns an object which includes the resulting system as a state space model, a transfer function, and an equation.
Helper functions are included to convert the symbolic matrices to Numpy [@oliphant2015] objects.
This code is documented using [readthedocs.io](https://statum.readthedocs.io/en/latest/) and works for both linear and nonlinear systems.

# Web Interface

To allow those without programming experience to use this code a web interface was designed and [implemented](http://statum.camerondevine.me/).
This interface has text boxes for equation input, and displays results as rendered math or code which can be copied into \LaTeX, Matlab, Python, or Mathematica.
Examples and documentation are built in to make learning how to use the interface as painless as possible.
There is also the ability to share, download, and save the system models for later use or modification.
This interface is designed to run on Amazon AWS serverless resources to simplify upkeep and keep costs low.
An automated installer is also included.

# Acknowledgments

The authors would like to acknowledge the work of [Gavin Basuel](https://www.gavinbasuel.com/) who designed the user experience for the web interface and helped with HTML/CSS development.

# References

<!--stackedit_data:
eyJkaXNjdXNzaW9ucyI6eyJTUjhYckl2em11VWpGY1paIjp7In
N0YXJ0Ijo2NjIsImVuZCI6ODE3LCJ0ZXh0IjoiV2hlbiBkZXRl
cm1pbmluZyB0aGUgZGlmZmVyZW50aWFsIGVxdWF0aW9uIG9mIG
EgZHluYW1pYyBzeXN0ZW0gdXNpbmcgbGluZWFyIGdyYeKApiJ9
LCJleVB3U3hGS1pTN3ViaWxuIjp7InN0YXJ0IjoxMTM0LCJlbm
QiOjExMzQsInRleHQiOiJXaGVuIGxlYXJuaW5nIHN5c3RlbSBk
eW5hbWljcywgc3R1ZGVudHMgd29yayBtYW55IHByb2JsZW1zIG
FzIGEgcGFydCBvZiB0aGVpciBj4oCmIn0sImtJdEwxUVZCSEl5
a21UQnQiOnsic3RhcnQiOjEyODksImVuZCI6MTQ2MCwidGV4dC
I6IlRvIGFpZCBzdHVkZW50cyBpbiB0aGVpciBsZWFybmluZyBw
cm9jZXNzIGEgcHJvZ3JhbSB3YXMgd3JpdHRlbiB0byBzeW1ib2
xpY2FsbHnigKYifSwiU25oNm1sM2J4RmtHUE1tZiI6eyJzdGFy
dCI6MTU5MiwiZW5kIjoxNjgyLCJ0ZXh0IjoiVGhpcyBmcmVlcy
B0aGUgc3R1ZGVudCB0byB3b3JrIG9uIHRoZSBhc3BlY3RzIG9m
IHN5c3RlbSBkeW5hbWljcyB3aGljaCBhcmUgbmV34oCmIn0sIk
g1QVdleGFDOHpsWGIyMU8iOnsic3RhcnQiOjE2ODQsImVuZCI6
MTc4MiwidGV4dCI6IkJlY2F1c2Ugc3ltYm9saWMgbWF0aCBsaW
JyYXJpZXMgYWxyZWFkeSBleGlzdCwgd3JpdGluZyB0aGlzIHNv
ZnR3YXJlIGlzIGEgcmVsYXTigKYifSwid0VHNlZ3OGtRd1pwaF
c2MyI6eyJzdGFydCI6MTgwMywiZW5kIjoxODA3LCJ0ZXh0Ijoi
ZG9uZSJ9LCJRd0xEdjNIM0JNUExVTDUwIjp7InN0YXJ0IjoxOD
g5LCJlbmQiOjE4OTcsInRleHQiOiJyZXF1aXJlZCJ9LCJwUktU
aW5vS2dzVzdWdDJIIjp7InN0YXJ0IjoxOTU5LCJlbmQiOjE5Nz
IsInRleHQiOiJzaXplIGFuZCBjb3N0In0sInJ4Mkx1bWRjS1ZF
aTJmVUsiOnsic3RhcnQiOjIxNDMsImVuZCI6MjE0NywidGV4dC
I6InVzZWQifSwiNmVpMk1STnkwc21peFhndSI6eyJzdGFydCI6
MjM5OSwiZW5kIjoyNDA1LCJ0ZXh0IjoiY2FuIGJlIn0sIjhWR2
w5Q1lyalhQTmU0RzQiOnsic3RhcnQiOjI0OTUsImVuZCI6MjUw
NywidGV4dCI6IndlYiBicm93c2VyLiJ9LCJTQ25ucDJUY0FaNm
VkSVRDIjp7InN0YXJ0IjoyNTA5LCJlbmQiOjI1MzAsInRleHQi
OiIjIE1hdGhlbWF0aWNhIFBhY2thZ2UifSwiemVtbWtoVU5RcH
ZOQUJrWiI6eyJzdGFydCI6Mzg0MiwiZW5kIjozODUwLCJ0ZXh0
IjoiaW5jbHVkZWQifSwiRVVST0Y0YUY3QkI3dDhESiI6eyJzdG
FydCI6MjU5MywiZW5kIjoyNjEwLCJ0ZXh0IjoiW2RvY3VtZW50
YXRpb25dKCkifX0sImNvbW1lbnRzIjp7IlJ5TGprMnFMY3I4RH
M4SmQiOnsiZGlzY3Vzc2lvbklkIjoiU1I4WHJJdnptdVVqRmNa
WiIsInN1YiI6ImdvOjEwMjkwNTQzNTUzMDg5NjQ3NDgwMCIsIn
RleHQiOiJJJ20gYSBiaWcgYmVsaWV2ZXIgdGhhdCB5b3VyIGZp
cnN0IHNlbnRlbmNlIHNob3VsZCB0cnkgdG8gY29udmV5IHRoZS
BtYWluIHBvaW50IG9mIHlvdXIgcGFwZXIuIFRoaXMgaXMgbW9y
ZSBvZiBhbiBcImludHJvZHVjdGlvblwiIHNlY3Rpb24gc2VudG
VuY2UsIGFzIGFyZSB0aG9zZSB0aGF0IGZvbGxvdyBpdC4gUGVy
aGFwcyB0aGlzICppcyogZWZmZWN0aXZlbHkgdGhlIGludHJvZH
VjdGlvbiBhbmQgdGhlcmUncyBhIHNlcGFyYXRlIGFic3RyYWN0
IC4uLiBpZiBzbywgdGhhdCdzIGZpbmUuIiwiY3JlYXRlZCI6MT
U0MzcxOTEwMjgzMH0sInpkaHdjTVppZURXcklwa0MiOnsiZGlz
Y3Vzc2lvbklkIjoiU1I4WHJJdnptdVVqRmNaWiIsInN1YiI6Im
dvOjEwMjkwNTQzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJJJ20g
Z29pbmcgdG8gY29udGludWUgY29tbWVudGluZyBhcyBpZiB0aG
lzIHRleHQgaXMgcHJlY2VkZWQgYnkgYW4gYWJzdHJhY3Qgb2Yg
c29tZSBzb3J0LiIsImNyZWF0ZWQiOjE1NDM3MTkyMDE4MDh9LC
J1YmRxTmhXU210R1VrU1dlIjp7ImRpc2N1c3Npb25JZCI6ImV5
UHdTeEZLWlM3dWJpbG4iLCJzdWIiOiJnbzoxMDI5MDU0MzU1Mz
A4OTY0NzQ4MDAiLCJ0ZXh0IjoiSSB0aGluayBhZGRpbmcgYSBw
aHJhc2UgdG8gdGhlIHByZWNlZGluZyBzZW50ZW5jZSBjb3VsZC
BjYXB0dXJlIHdoYXQgeW91J3JlIHRyeWluZyB0byBzYXksIGhl
cmUuIFNvbWV0aGluZyBsaWtlIFwiLi4uIG1ha2UgbWlzdGFrZX
MsIHdoaWNoIGxlYWQgdG8gZnJ1c3RyYXRpb24gYW5kIGRpc2Nv
dXJhZ2VtZW50IHdoZW4gbWFudWFsbHkgcmVkdWNpbmcgdGhlIH
N5c3RlbSBvZiBlcXVhdGlvbnMuXCIiLCJjcmVhdGVkIjoxNTQz
NzE5NjEwNjg3fSwiNEJyY05qc0RseFNiTGxNNiI6eyJkaXNjdX
NzaW9uSWQiOiJrSXRMMVFWQkhJeWttVEJ0Iiwic3ViIjoiZ286
MTAyOTA1NDM1NTMwODk2NDc0ODAwIiwidGV4dCI6IldlIGNhbi
Bub3cgYmUgbW9yZSBzcGVjaWZpYywgaGVyZS4gV2UgaGF2ZSBh
bHJlYWR5IGludHJvZHVjZWQgdGhlIGVxdWF0aW9ucyBhbmQgdG
hlIHRhc2sgb2YgYXV0b21hdGlvbi4iLCJjcmVhdGVkIjoxNTQz
NzIwMDYzNjkyfSwic295SEd3ZkJxZHo1VThYNSI6eyJkaXNjdX
NzaW9uSWQiOiJTbmg2bWwzYnhGa0dQTW1mIiwic3ViIjoiZ286
MTAyOTA1NDM1NTMwODk2NDc0ODAwIiwidGV4dCI6IkkgdGhpbm
sgeW91IGNvdWxkIHJlcGhyYXNlIHRoaXMgdG8gYmUgbW9yZSBj
bGVhciB0aGF0IHRoZSBcIm5ld1wiIGFuZCBcInVuaXF1ZVwiIG
FzcGVjdHMgYXJlIHNvIHRvIHRoZSBzdHVkZW50cywgbm90IHN5
c3RlbSBkeW5hbWljcy4iLCJjcmVhdGVkIjoxNTQzNzIwMTQwND
EwfSwiSnJtZENxcklIUFc2blFjVSI6eyJkaXNjdXNzaW9uSWQi
OiJINUFXZXhhQzh6bFhiMjFPIiwic3ViIjoiZ286MTAyOTA1ND
M1NTMwODk2NDc0ODAwIiwidGV4dCI6IkNvbnNpZGVyIGdldHRp
bmcgcmlkIG9mIHRoZSBleGlzdGVuY2Ugc3RhdGVtZW50IGFuZC
BpbnN0ZWFkIGZvY3VzIG9uIHRoZSBmYWN0IHRoYXQgd2UgKmFw
cGxpZWQgZXhpc3RpbmcqIHN5bWJvbGljIG1hdGggbGlicmFyaW
VzLiBBbHNvIGNvbnNpZGVyIGNhbGxpbmcgaXQgXCJtYXRoZW1h
dGljc1wiIGJlY2F1c2Ugd2UncmUgZmFuY3kiLCJjcmVhdGVkIj
oxNTQzNzIwMjc1NjU5fSwiSjZHNm84NGNIdFdBNXRaUCI6eyJk
aXNjdXNzaW9uSWQiOiJ3RUc2Vnc4a1F3WnBoVzYzIiwic3ViIj
oiZ286MTAyOTA1NDM1NTMwODk2NDc0ODAwIiwidGV4dCI6IkNv
bnNpZGVyIHJlcGhyYXNpbmcgdG8gYXZvaWQgXCJkb25lXCIiLC
JjcmVhdGVkIjoxNTQzNzIwMzA0OTMxfSwidHdaZnlGeEhWazRm
dmltRCI6eyJkaXNjdXNzaW9uSWQiOiJRd0xEdjNIM0JNUExVTD
UwIiwic3ViIjoiZ286MTAyOTA1NDM1NTMwODk2NDc0ODAwIiwi
dGV4dCI6IkkgdGhpbmsgcHJlc2VudCB0ZW5zZSBpcyBiZXR0ZX
Igc2luY2Ugd2UncmUgc3RpbGwgcmVsZWFzaW5nIGEgTU1BIHBh
Y2thZ2UiLCJjcmVhdGVkIjoxNTQzNzIwMzMzNTQ4fSwia25aSV
J5bDdSckVYVVQzNiI6eyJkaXNjdXNzaW9uSWQiOiJwUktUaW5v
S2dzVzdWdDJIIiwic3ViIjoiZ286MTAyOTA1NDM1NTMwODk2ND
c0ODAwIiwidGV4dCI6IkkgdGhpbmsgcGVyaGFwcyB0aGUgbW9z
dCBpbXBvcnRhbnQgYXNwZWN0IGlzIHRoYXQgaXQgcmVxdWlyZX
Mgc3R1ZGVudHMgdG8gbGVhcm4gYSBuZXcgc29mdHdhcmUgc3lz
dGVtIC4uLiB3aGljaCBtb3JlIHRoYW4gb3V0d2VpZ2hzIHRoZS
BhZHZhbnRhZ2VzIGZvciBtb3N0IG9mIHRoZSBzdHVkZW50cyAu
Li4geW91ciB3ZWIgYXBwIGxldHMgdGhlbSBnZXQgc3RhcnRlZC
B3aXRob3V0IGxlYXJuaW5nIE1NQSIsImNyZWF0ZWQiOjE1NDM3
MjA0NDU2Nzh9LCI0b3hyUnNoRklpY00yRU9PIjp7ImRpc2N1c3
Npb25JZCI6InJ4Mkx1bWRjS1ZFaTJmVUsiLCJzdWIiOiJnbzox
MDI5MDU0MzU1MzA4OTY0NzQ4MDAiLCJ0ZXh0IjoiSXQncyBiZX
N0IHRvIGF2b2lkIFwidXNlZFwiIC4uLiBhbmQgZXZlbiBiZXR0
ZXIgdG8gYXZvaWQgdGhlIHBocmFzaW5nIHRoYXQgbGVhZCB0by
BpdC4gRS5nLiB0aGlzIHNlbnRlbmNlIGNvdWxkIGJlIFwiRm9y
IHRoZXNlIHJlYXNvbnMsIGEgdmVyc2lvbiBvZiB0aGUgc29mdH
dhcmUgd3JpdHRlbiBpbiB0aGUgUHl0aG9uIC4uLi5cIiIsImNy
ZWF0ZWQiOjE1NDM3MjA2NjU5MDZ9LCJIZFZJdXhNMURaUkdLUD
RxIjp7ImRpc2N1c3Npb25JZCI6IjZlaTJNUk55MHNtaXhYZ3Ui
LCJzdWIiOiJnbzoxMDI5MDU0MzU1MzA4OTY0NzQ4MDAiLCJ0ZX
h0IjoiV2UndmUgYWxyZWFkeSBkb25lIHRoaXMsIHNvIGl0IHNo
b3VsZCBiZSBcIndhc1wiIiwiY3JlYXRlZCI6MTU0MzcyMDcyOD
Q1M30sIjRvU1lYRzBCQ3N5SHF0QWoiOnsiZGlzY3Vzc2lvbklk
IjoiOFZHbDlDWXJqWFBOZTRHNCIsInN1YiI6ImdvOjEwMjkwNT
QzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJZb3UgY2FuIG5vdyBk
cml2ZSBob21lIHRoYXQgdGhlIHdlYiBhcHAgZG9lc24ndCByZX
F1aXJlIGFueSBNYXRoZW1hdGljYSBvciBQeXRob24vU3ltUHkg
a25vd2xlZGdlLCB3aGljaCBJIHRoaW5rIGlzIHRoZSBtb3N0IG
ltcG9ydGFudCBhZHZhbnRhZ2UhIiwiY3JlYXRlZCI6MTU0Mzcy
MDc5NTY2MH0sIjRjeGlBRmZDYXJTZjY1dmoiOnsiZGlzY3Vzc2
lvbklkIjoiU0NubnAyVGNBWjZlZElUQyIsInN1YiI6ImdvOjEw
MjkwNTQzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJDb25zaWRlci
ByZW9yZGVyaW5nIHRoZXNlIC4uLiBhdCBsZWFzdCBwdXR0aW5n
IE1NQSBsYXN0LCBzaW5jZSBJIHRoaW5rIGl0J3MgbGVhc3QgaW
1wb3J0YW50LiIsImNyZWF0ZWQiOjE1NDM3MjI1MzE2Nzd9LCJC
eHlMa3REOUkzdDJXNnVVIjp7ImRpc2N1c3Npb25JZCI6InplbW
1raFVOUXB2TkFCa1oiLCJzdWIiOiJnbzoxMDI5MDU0MzU1MzA4
OTY0NzQ4MDAiLCJ0ZXh0IjoiV2hlcmU/IiwiY3JlYXRlZCI6MT
U0MzcyMzA3NDkyOX0sInEwQUpadHVHOVNrYjZOc1UiOnsiZGlz
Y3Vzc2lvbklkIjoiemVtbWtoVU5RcHZOQUJrWiIsInN1YiI6Im
dvOjEwMjkwNTQzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJJIG1l
YW4gd2Ugc2hvdWxkIGh5cGVybGluayBpdCIsImNyZWF0ZWQiOj
E1NDM3MjMwOTIwMjF9LCJFdWlEYVhrOW5YZWVtR2pSIjp7ImRp
c2N1c3Npb25JZCI6IkVVUk9GNGFGN0JCN3Q4REoiLCJzdWIiOi
JnbzoxMDI5MDU0MzU1MzA4OTY0NzQ4MDAiLCJ0ZXh0IjoiSSdt
IGFmcmFpZCB0byBoYXJkY29kZSB0aGUgdXJsLCBlc3BlY2lhbG
x5IGlmIHdlJ3JlIGNoYW5naW5nIHRvIFN0YXRlTWludCAuLi4i
LCJjcmVhdGVkIjoxNTQzNzc2ODIwMjE1fX0sImhpc3RvcnkiOl
sxNjgyNTMwNDkzLC0xNDkyOTA5NTcsNDIzNjYwMTEsLTI1Njk2
NTgzNywtMTIwMTkxMDQ1MiwyMDk4Nzc1OTYwXX0=
-->