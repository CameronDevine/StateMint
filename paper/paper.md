---
title: 'Statum: An Application for Determining Symbolic Dynamic System Models using Linear Graph Methods'
tags:
  - system dynamics
  - calculator
  - symbolic math
  - computer algebra system
authors:
  - name: Cameron Devine
    orcid: 0000-0002-6579-111X
    affiliation: 1
  - name: Joseph L. Garbini
    affiliation: 1
  - name: Rico A. R. Picone
    orcid: 0000-0002-5091-5175
    affiliation: "2, 1"
affiliations:
  - name: University of Washington, Department of Mechanical Engineering
    index: 1
  - name: Saint Martin's University, Department of Mechanical Engineering
    index: 2
date: 26 September 2018
bibliography: paper.bib
---

# Summary

When determining the differential equation of a dynamic system using linear graph methods finding the elemental and constraint equations is the first step.
An understanding of the physical phenomena is necessary to determine these equations.
The next step is to algebraically eliminate those variables that are not state or input variables from the equations until a minimal set of differential equations remains.
This is where students most often make mistakes.
When learning system dynamics, students work many problems as a part of their coursework.
A reoccuring mistake can greatly effect a students percieved skill in this subject area.
However, this algebra is not a necessary component of a strong understanding of system dynamics.

To aid students in their learning process a program was written to symbolically determine the differential equations using the elemental and constraint equations as input.
This program allows students to focus on the process of creating a dynamic system model without worrying about algebraic mistakes.
This frees the student to work on the aspects of system dynamics which are new and unique.

Because symbolic math libraries already exist, writing this software is a relatively trivial task.
This was originally done in Mathematica because of its advanced symbolic math capabilities.
However, this required students to purchase and install Mathematica.
Because of the size and cost of Mathematica a more economical solution was desired.
To solve this problem the Python programming language along with SymPy [@meurer2017], a symbolic math library, was used to recreate the software.
This provides the same functionality without the cost barrier and with a smaller installed size.
The Python implementation also allows this code to be run as an Amazon AWS Lambda function.
With the Lambda function, a website can be designed to allow this software to be used by any device with an internet connection and web browser.

# Mathematica Package

The Mathematica package `StateMint` can be installed via the [documentation](). The central function of the package is `stateEquations`, which uses an algorithm similar to that of the Python package, above, to derive the state equations. It takes as arguments lists of elemental equations, constraint equations, primary variables, and input variables and returns the vector state equation, state variables, and the time-derivative of the state variables.

The `outputEquations` function derives the output equations given output expressions in terms of primary and secondary variables (including inputs). The function accepts lists of input variables, state variables, elemental and constraint equations, and output expressions.

The functions `stateEquations` and `outputEquations` yield what are in general *nonlinear* state and output equations. Linear state and output equations are typically written in a standard vector form described by matrices `A`, `B`, `C`, and `D` (and sometimes `E` and `F`). The `linearizeState` function accepts lists of input variables, state variables, and the time-derivatives of the state vector (from `stateEquations`) and returns the `A`, `B`, and `E` matrices. Similarly, `linearizeOutput` returns the `C`, `D`, and `F` matrices.

A tutorial on how to use this package is included.

# Python Package

The Python package for performing the same task uses similar logic to the second method of the Mathematica package, again in the form defined by Rowell and Wormley [@rowell1997].
This function returns an object which includes the resulting system as a state space model, a transfer function, and an equation.
Helper functions are included to convert the symbolic matrices to Numpy [@oliphant2015] objects.
This code is documented using [readthedocs.io](https://statum.readthedocs.io/en/latest/) and works for both linear and nonlinear systems.

# Web Interface

To allow those without programming experience to use this code a web interface was designed and [implemented](http://statum.camerondevine.me/).
This interface has text boxes for equation input, and displays results as rendered math or code which can be copied into \LaTeX, Matlab, Python, or Mathematica.
Examples and documentation are built in to make learning how to use the interface as painless as possible.
There is also the ability to share, download, and save the system models for later use or modification.
This interface is designed to run on Amazon AWS serverless resources to simplify upkeep and keep costs low.
An automated installer is also included.

# Acknowledgments

The authors would like to acknowledge the work of [Gavin Basuel](https://www.gavinbasuel.com/) who designed the user experience for the web interface and helped with HTML/CSS development.

# References

<!--stackedit_data:
eyJkaXNjdXNzaW9ucyI6eyJTUjhYckl2em11VWpGY1paIjp7In
N0YXJ0Ijo2NjIsImVuZCI6ODE3LCJ0ZXh0IjoiV2hlbiBkZXRl
cm1pbmluZyB0aGUgZGlmZmVyZW50aWFsIGVxdWF0aW9uIG9mIG
EgZHluYW1pYyBzeXN0ZW0gdXNpbmcgbGluZWFyIGdyYeKApiJ9
LCJkMlFycnZsSnZjUmNFSXJiIjp7InN0YXJ0Ijo4MTgsImVuZC
I6OTAzLCJ0ZXh0IjoiQW4gdW5kZXJzdGFuZGluZyBvZiB0aGUg
cGh5c2ljYWwgcGhlbm9tZW5hIGlzIG5lY2Vzc2FyeSB0byBkZX
Rlcm1pbmUgdGhlc2UgZXF1YeKApiJ9LCJleVB3U3hGS1pTN3Vi
aWxuIjp7InN0YXJ0IjoxMTI1LCJlbmQiOjEzMDMsInRleHQiOi
JXaGVuIGxlYXJuaW5nIHN5c3RlbSBkeW5hbWljcywgc3R1ZGVu
dHMgd29yayBtYW55IHByb2JsZW1zIGFzIGEgcGFydCBvZiB0aG
VpciBj4oCmIn0sIkJhcEpWbXc2RFVXNEpNZVMiOnsic3RhcnQi
OjEzMDQsImVuZCI6MTQwMCwidGV4dCI6Ikhvd2V2ZXIsIHRoaX
MgYWxnZWJyYSBpcyBub3QgYSBuZWNlc3NhcnkgY29tcG9uZW50
IG9mIGEgc3Ryb25nIHVuZGVyc3RhbmRpbmcgb2bigKYifSwia0
l0TDFRVkJISXlrbVRCdCI6eyJzdGFydCI6MTQwMiwiZW5kIjox
NTczLCJ0ZXh0IjoiVG8gYWlkIHN0dWRlbnRzIGluIHRoZWlyIG
xlYXJuaW5nIHByb2Nlc3MgYSBwcm9ncmFtIHdhcyB3cml0dGVu
IHRvIHN5bWJvbGljYWxseeKApiJ9LCJTbmg2bWwzYnhGa0dQTW
1mIjp7InN0YXJ0IjoxNzA1LCJlbmQiOjE3OTUsInRleHQiOiJU
aGlzIGZyZWVzIHRoZSBzdHVkZW50IHRvIHdvcmsgb24gdGhlIG
FzcGVjdHMgb2Ygc3lzdGVtIGR5bmFtaWNzIHdoaWNoIGFyZSBu
ZXfigKYifSwiSDVBV2V4YUM4emxYYjIxTyI6eyJzdGFydCI6MT
c5NywiZW5kIjoxODk1LCJ0ZXh0IjoiQmVjYXVzZSBzeW1ib2xp
YyBtYXRoIGxpYnJhcmllcyBhbHJlYWR5IGV4aXN0LCB3cml0aW
5nIHRoaXMgc29mdHdhcmUgaXMgYSByZWxhdOKApiJ9LCJ3RUc2
Vnc4a1F3WnBoVzYzIjp7InN0YXJ0IjoxOTE2LCJlbmQiOjE5Mj
AsInRleHQiOiJkb25lIn0sIlF3TER2M0gzQk1QTFVMNTAiOnsi
c3RhcnQiOjIwMDIsImVuZCI6MjAxMCwidGV4dCI6InJlcXVpcm
VkIn0sInBSS1Rpbm9LZ3NXN1Z0MkgiOnsic3RhcnQiOjIwNzIs
ImVuZCI6MjA4NSwidGV4dCI6InNpemUgYW5kIGNvc3QifSwicn
gyTHVtZGNLVkVpMmZVSyI6eyJzdGFydCI6MjI1NiwiZW5kIjoy
MjYwLCJ0ZXh0IjoidXNlZCJ9LCI2ZWkyTVJOeTBzbWl4WGd1Ij
p7InN0YXJ0IjoyNTEyLCJlbmQiOjI1MTgsInRleHQiOiJjYW4g
YmUifSwiOFZHbDlDWXJqWFBOZTRHNCI6eyJzdGFydCI6MjYwOC
wiZW5kIjoyNjIwLCJ0ZXh0Ijoid2ViIGJyb3dzZXIuIn0sIlND
bm5wMlRjQVo2ZWRJVEMiOnsic3RhcnQiOjI2MjIsImVuZCI6Mj
Y0MywidGV4dCI6IiMgTWF0aGVtYXRpY2EgUGFja2FnZSJ9LCJ6
ZW1ta2hVTlFwdk5BQmtaIjp7InN0YXJ0IjozOTU1LCJlbmQiOj
M5NjMsInRleHQiOiJpbmNsdWRlZCJ9LCJFVVJPRjRhRjdCQjd0
OERKIjp7InN0YXJ0IjoyNzA2LCJlbmQiOjI3MjMsInRleHQiOi
JbZG9jdW1lbnRhdGlvbl0oKSJ9fSwiY29tbWVudHMiOnsiUnlM
amsycUxjcjhEczhKZCI6eyJkaXNjdXNzaW9uSWQiOiJTUjhYck
l2em11VWpGY1paIiwic3ViIjoiZ286MTAyOTA1NDM1NTMwODk2
NDc0ODAwIiwidGV4dCI6IkknbSBhIGJpZyBiZWxpZXZlciB0aG
F0IHlvdXIgZmlyc3Qgc2VudGVuY2Ugc2hvdWxkIHRyeSB0byBj
b252ZXkgdGhlIG1haW4gcG9pbnQgb2YgeW91ciBwYXBlci4gVG
hpcyBpcyBtb3JlIG9mIGFuIFwiaW50cm9kdWN0aW9uXCIgc2Vj
dGlvbiBzZW50ZW5jZSwgYXMgYXJlIHRob3NlIHRoYXQgZm9sbG
93IGl0LiBQZXJoYXBzIHRoaXMgKmlzKiBlZmZlY3RpdmVseSB0
aGUgaW50cm9kdWN0aW9uIGFuZCB0aGVyZSdzIGEgc2VwYXJhdG
UgYWJzdHJhY3QgLi4uIGlmIHNvLCB0aGF0J3MgZmluZS4iLCJj
cmVhdGVkIjoxNTQzNzE5MTAyODMwfSwiemRod2NNWmllRFdySX
BrQyI6eyJkaXNjdXNzaW9uSWQiOiJTUjhYckl2em11VWpGY1pa
Iiwic3ViIjoiZ286MTAyOTA1NDM1NTMwODk2NDc0ODAwIiwidG
V4dCI6IkknbSBnb2luZyB0byBjb250aW51ZSBjb21tZW50aW5n
IGFzIGlmIHRoaXMgdGV4dCBpcyBwcmVjZWRlZCBieSBhbiBhYn
N0cmFjdCBvZiBzb21lIHNvcnQuIiwiY3JlYXRlZCI6MTU0Mzcx
OTIwMTgwOH0sIm9oMWpmNmVPTmJHYjVyMHciOnsiZGlzY3Vzc2
lvbklkIjoiZDJRcnJ2bEp2Y1JjRUlyYiIsInN1YiI6ImdvOjEw
MjkwNTQzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJUcnVlLCBidX
QgcHJvYmFibHkgbm90IG5lZWRlZCBoZXJlIiwiY3JlYXRlZCI6
MTU0MzcxOTI0MDgzNn0sInViZHFOaFdTbXRHVWtTV2UiOnsiZG
lzY3Vzc2lvbklkIjoiZXlQd1N4RktaUzd1YmlsbiIsInN1YiI6
ImdvOjEwMjkwNTQzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJJIH
RoaW5rIGFkZGluZyBhIHBocmFzZSB0byB0aGUgcHJlY2VkaW5n
IHNlbnRlbmNlIGNvdWxkIGNhcHR1cmUgd2hhdCB5b3UncmUgdH
J5aW5nIHRvIHNheSwgaGVyZS4gU29tZXRoaW5nIGxpa2UgXCIu
Li4gbWFrZSBtaXN0YWtlcywgd2hpY2ggbGVhZCB0byBmcnVzdH
JhdGlvbiBhbmQgZGlzY291cmFnZW1lbnQgd2hlbiBtYW51YWxs
eSByZWR1Y2luZyB0aGUgc3lzdGVtIG9mIGVxdWF0aW9ucy5cIi
IsImNyZWF0ZWQiOjE1NDM3MTk2MTA2ODd9LCI0NFdCZTRrWEVB
RktvSFFLIjp7ImRpc2N1c3Npb25JZCI6IkJhcEpWbXc2RFVXNE
pNZVMiLCJzdWIiOiJnbzoxMDI5MDU0MzU1MzA4OTY0NzQ4MDAi
LCJ0ZXh0IjoiQWx3YXlzIHRyeSB0byBzaGVkIHdvcmRzLCB3aG
VuIHBvc3NpYmxlLiBBbHNvIHRyeSBwYWNraW5nIGluIGFzIG11
Y2ggc3BlY2lmaWNpdHkuIEhlcmUgeW91IGNvdWxkIHNheSBcIk
hvd2V2ZXIsIGZsYXdsZXNzIG1hbnVhbCBhbGdlYnJhIGlzIG5v
dCByZXF1aXJlZCB0byB1bmRlcnN0YW5kIHN5c3RlbSBkeW5hbW
ljcy5cIiIsImNyZWF0ZWQiOjE1NDM3MTk4NzAxMjJ9LCJhNkRJ
ZlFoTnppbTAweTBuIjp7ImRpc2N1c3Npb25JZCI6IkJhcEpWbX
c2RFVXNEpNZVMiLCJzdWIiOiJnbzoxMDI5MDU0MzU1MzA4OTY0
NzQ4MDAiLCJ0ZXh0IjoiSSB3b3VsZCBhZGQgc29tZXRoaW5nIG
xpa2UgXCJNb3Jlb3ZlciwgdGhlIGFsZ2VicmEgY2FuIGJlIGF1
dG9tYXRlZCwgYSBmZXcgdG9vbHMgZm9yIHdoaWNoIHdlIHByZX
NlbnQsIGhlcmUuIiwiY3JlYXRlZCI6MTU0MzcxOTk3MjMwOX0s
IjRCcmNOanNEbHhTYkxsTTYiOnsiZGlzY3Vzc2lvbklkIjoia0
l0TDFRVkJISXlrbVRCdCIsInN1YiI6ImdvOjEwMjkwNTQzNTUz
MDg5NjQ3NDgwMCIsInRleHQiOiJXZSBjYW4gbm93IGJlIG1vcm
Ugc3BlY2lmaWMsIGhlcmUuIFdlIGhhdmUgYWxyZWFkeSBpbnRy
b2R1Y2VkIHRoZSBlcXVhdGlvbnMgYW5kIHRoZSB0YXNrIG9mIG
F1dG9tYXRpb24uIiwiY3JlYXRlZCI6MTU0MzcyMDA2MzY5Mn0s
InNveUhHd2ZCcWR6NVU4WDUiOnsiZGlzY3Vzc2lvbklkIjoiU2
5oNm1sM2J4RmtHUE1tZiIsInN1YiI6ImdvOjEwMjkwNTQzNTUz
MDg5NjQ3NDgwMCIsInRleHQiOiJJIHRoaW5rIHlvdSBjb3VsZC
ByZXBocmFzZSB0aGlzIHRvIGJlIG1vcmUgY2xlYXIgdGhhdCB0
aGUgXCJuZXdcIiBhbmQgXCJ1bmlxdWVcIiBhc3BlY3RzIGFyZS
BzbyB0byB0aGUgc3R1ZGVudHMsIG5vdCBzeXN0ZW0gZHluYW1p
Y3MuIiwiY3JlYXRlZCI6MTU0MzcyMDE0MDQxMH0sIkpybWRDcX
JJSFBXNm5RY1UiOnsiZGlzY3Vzc2lvbklkIjoiSDVBV2V4YUM4
emxYYjIxTyIsInN1YiI6ImdvOjEwMjkwNTQzNTUzMDg5NjQ3ND
gwMCIsInRleHQiOiJDb25zaWRlciBnZXR0aW5nIHJpZCBvZiB0
aGUgZXhpc3RlbmNlIHN0YXRlbWVudCBhbmQgaW5zdGVhZCBmb2
N1cyBvbiB0aGUgZmFjdCB0aGF0IHdlICphcHBsaWVkIGV4aXN0
aW5nKiBzeW1ib2xpYyBtYXRoIGxpYnJhcmllcy4gQWxzbyBjb2
5zaWRlciBjYWxsaW5nIGl0IFwibWF0aGVtYXRpY3NcIiBiZWNh
dXNlIHdlJ3JlIGZhbmN5IiwiY3JlYXRlZCI6MTU0MzcyMDI3NT
Y1OX0sIko2RzZvODRjSHRXQTV0WlAiOnsiZGlzY3Vzc2lvbklk
Ijoid0VHNlZ3OGtRd1pwaFc2MyIsInN1YiI6ImdvOjEwMjkwNT
QzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJDb25zaWRlciByZXBo
cmFzaW5nIHRvIGF2b2lkIFwiZG9uZVwiIiwiY3JlYXRlZCI6MT
U0MzcyMDMwNDkzMX0sInR3WmZ5RnhIVms0ZnZpbUQiOnsiZGlz
Y3Vzc2lvbklkIjoiUXdMRHYzSDNCTVBMVUw1MCIsInN1YiI6Im
dvOjEwMjkwNTQzNTUzMDg5NjQ3NDgwMCIsInRleHQiOiJJIHRo
aW5rIHByZXNlbnQgdGVuc2UgaXMgYmV0dGVyIHNpbmNlIHdlJ3
JlIHN0aWxsIHJlbGVhc2luZyBhIE1NQSBwYWNrYWdlIiwiY3Jl
YXRlZCI6MTU0MzcyMDMzMzU0OH0sImtuWklSeWw3UnJFWFVUMz
YiOnsiZGlzY3Vzc2lvbklkIjoicFJLVGlub0tnc1c3VnQySCIs
InN1YiI6ImdvOjEwMjkwNTQzNTUzMDg5NjQ3NDgwMCIsInRleH
QiOiJJIHRoaW5rIHBlcmhhcHMgdGhlIG1vc3QgaW1wb3J0YW50
IGFzcGVjdCBpcyB0aGF0IGl0IHJlcXVpcmVzIHN0dWRlbnRzIH
RvIGxlYXJuIGEgbmV3IHNvZnR3YXJlIHN5c3RlbSAuLi4gd2hp
Y2ggbW9yZSB0aGFuIG91dHdlaWdocyB0aGUgYWR2YW50YWdlcy
Bmb3IgbW9zdCBvZiB0aGUgc3R1ZGVudHMgLi4uIHlvdXIgd2Vi
IGFwcCBsZXRzIHRoZW0gZ2V0IHN0YXJ0ZWQgd2l0aG91dCBsZW
FybmluZyBNTUEiLCJjcmVhdGVkIjoxNTQzNzIwNDQ1Njc4fSwi
NG94clJzaEZJaWNNMkVPTyI6eyJkaXNjdXNzaW9uSWQiOiJyeD
JMdW1kY0tWRWkyZlVLIiwic3ViIjoiZ286MTAyOTA1NDM1NTMw
ODk2NDc0ODAwIiwidGV4dCI6Ikl0J3MgYmVzdCB0byBhdm9pZC
BcInVzZWRcIiAuLi4gYW5kIGV2ZW4gYmV0dGVyIHRvIGF2b2lk
IHRoZSBwaHJhc2luZyB0aGF0IGxlYWQgdG8gaXQuIEUuZy4gdG
hpcyBzZW50ZW5jZSBjb3VsZCBiZSBcIkZvciB0aGVzZSByZWFz
b25zLCBhIHZlcnNpb24gb2YgdGhlIHNvZnR3YXJlIHdyaXR0ZW
4gaW4gdGhlIFB5dGhvbiAuLi4uXCIiLCJjcmVhdGVkIjoxNTQz
NzIwNjY1OTA2fSwiSGRWSXV4TTFEWlJHS1A0cSI6eyJkaXNjdX
NzaW9uSWQiOiI2ZWkyTVJOeTBzbWl4WGd1Iiwic3ViIjoiZ286
MTAyOTA1NDM1NTMwODk2NDc0ODAwIiwidGV4dCI6IldlJ3ZlIG
FscmVhZHkgZG9uZSB0aGlzLCBzbyBpdCBzaG91bGQgYmUgXCJ3
YXNcIiIsImNyZWF0ZWQiOjE1NDM3MjA3Mjg0NTN9LCI0b1NZWE
cwQkNzeUhxdEFqIjp7ImRpc2N1c3Npb25JZCI6IjhWR2w5Q1ly
alhQTmU0RzQiLCJzdWIiOiJnbzoxMDI5MDU0MzU1MzA4OTY0Nz
Q4MDAiLCJ0ZXh0IjoiWW91IGNhbiBub3cgZHJpdmUgaG9tZSB0
aGF0IHRoZSB3ZWIgYXBwIGRvZXNuJ3QgcmVxdWlyZSBhbnkgTW
F0aGVtYXRpY2Egb3IgUHl0aG9uL1N5bVB5IGtub3dsZWRnZSwg
d2hpY2ggSSB0aGluayBpcyB0aGUgbW9zdCBpbXBvcnRhbnQgYW
R2YW50YWdlISIsImNyZWF0ZWQiOjE1NDM3MjA3OTU2NjB9LCI0
Y3hpQUZmQ2FyU2Y2NXZqIjp7ImRpc2N1c3Npb25JZCI6IlNDbm
5wMlRjQVo2ZWRJVEMiLCJzdWIiOiJnbzoxMDI5MDU0MzU1MzA4
OTY0NzQ4MDAiLCJ0ZXh0IjoiQ29uc2lkZXIgcmVvcmRlcmluZy
B0aGVzZSAuLi4gYXQgbGVhc3QgcHV0dGluZyBNTUEgbGFzdCwg
c2luY2UgSSB0aGluayBpdCdzIGxlYXN0IGltcG9ydGFudC4iLC
JjcmVhdGVkIjoxNTQzNzIyNTMxNjc3fSwiQnh5TGt0RDlJM3Qy
VzZ1VSI6eyJkaXNjdXNzaW9uSWQiOiJ6ZW1ta2hVTlFwdk5BQm
taIiwic3ViIjoiZ286MTAyOTA1NDM1NTMwODk2NDc0ODAwIiwi
dGV4dCI6IldoZXJlPyIsImNyZWF0ZWQiOjE1NDM3MjMwNzQ5Mj
l9LCJxMEFKWnR1RzlTa2I2TnNVIjp7ImRpc2N1c3Npb25JZCI6
InplbW1raFVOUXB2TkFCa1oiLCJzdWIiOiJnbzoxMDI5MDU0Mz
U1MzA4OTY0NzQ4MDAiLCJ0ZXh0IjoiSSBtZWFuIHdlIHNob3Vs
ZCBoeXBlcmxpbmsgaXQiLCJjcmVhdGVkIjoxNTQzNzIzMDkyMD
IxfSwiRXVpRGFYazluWGVlbUdqUiI6eyJkaXNjdXNzaW9uSWQi
OiJFVVJPRjRhRjdCQjd0OERKIiwic3ViIjoiZ286MTAyOTA1ND
M1NTMwODk2NDc0ODAwIiwidGV4dCI6IkknbSBhZnJhaWQgdG8g
aGFyZGNvZGUgdGhlIHVybCwgZXNwZWNpYWxseSBpZiB3ZSdyZS
BjaGFuZ2luZyB0byBTdGF0ZU1pbnQgLi4uIiwiY3JlYXRlZCI6
MTU0Mzc3NjgyMDIxNX19LCJoaXN0b3J5IjpbLTE0OTI5MDk1Ny
w0MjM2NjAxMSwtMjU2OTY1ODM3LC0xMjAxOTEwNDUyLDIwOTg3
NzU5NjBdfQ==
-->